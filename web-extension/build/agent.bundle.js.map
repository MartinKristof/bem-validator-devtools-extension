{"version":3,"sources":["webpack:///webpack/bootstrap 4048172fc59fb451a4a1","webpack:///./src/agent/index.js","webpack:///./src/agent/Agent.js","webpack:///./src/agent/util/sendMessage.js"],"names":["window","__bem_agent_injected__","agent","Agent","sendMessage","require","handlers","connect","error","getData","sendData","initDevtoolsMessageListener","addEventListener","event","source","message","data","handleMessage","handler","name","console","log","warn","call","document","body","className","documentElement","innerHTML","postMessage","module","exports"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;;;;;;AAEAA,QAAOC,sBAAP,GAAgC,IAAhC;;AAEA,KAAMC,QAAQ,IAAIC,eAAJ,EAAd,C;;;;;;;;;;;;;;;;;;;ACJA,KAAIC,cAAc,mBAAAC,CAAQ,EAAR,CAAlB;;KAEMF,K;AACJ,oBAAc;AAAA;;AACZ,UAAKG,QAAL,GAAgB;AACd;AACAC,gBAAS;AAAA,gBAAMH,YAAY,WAAZ,CAAN;AAAA,QAFK;AAGdI,cAAO;AAAA,gBAASJ,YAAY,eAAZ,EAA6BI,MAA7B,CAAT;AAAA,QAHO;AAIdC,gBAAS;AAAA,gBAAMN,MAAMO,QAAN,EAAN;AAAA;AAJK,MAAhB;;AAOA,UAAKC,2BAAL;AACD;;;;mDAQ6B;AAAA;;AAC5BX,cAAOY,gBAAP,CAAwB,SAAxB,EAAmC,iBAAS;AAC1C;AACA,aAAIC,MAAMC,MAAN,KAAiBd,MAArB,EAA6B;AAC3B;AACD;;AAED,aAAIe,UAAUF,MAAMG,IAApB;;AAEA;AACA,aACE,QAAOD,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IACAA,YAAY,IADZ,IAEAA,QAAQD,MAAR,KAAmB,wBAHrB,EAIE;AACA;AACD;;AAED,eAAKG,aAAL,CAAmBF,OAAnB;AACD,QAlBD;AAmBD;;;mCAEaA,O,EAAS;AACrB,WAAIG,UAAU,KAAKZ,QAAL,CAAcS,QAAQI,IAAtB,CAAd;AACAC,eAAQC,GAAR,CAAY,4BAAZ,EAA0CN,OAA1C;AACA,WAAI,CAACG,OAAL,EAAc;AACZE,iBAAQE,IAAR,CAAa,gCAAgCH,IAA7C;AACA;AACD;;AAEDD,eAAQK,IAAR,CAAa,IAAb,EAAmBR,QAAQC,IAA3B;AACD;;;gCArCiB;AACdI,eAAQC,GAAR,CAAYG,SAASC,IAAT,CAAcC,SAA1B;;AAEF,cAAOtB,YAAY,UAAZ,EAAwBoB,SAASG,eAAT,CAAyBC,SAAjD,CAAP;AACD;;;;;;mBAoCYzB,K;;;;;;;;;ACtDf,KAAMC,cAAc,SAAdA,WAAc,CAACe,IAAD,EAAOH,IAAP,EAAgB;AAClChB,UAAO6B,WAAP,CAAmB;AACjBf,aAAQ,qBADS;AAEjBK,WAAMA,IAFW;AAGjBH,WAAMA,QAAQ;AAHG,IAAnB,EAIG,GAJH;AAKD,EAND;;AAQAc,QAAOC,OAAP,GAAiB3B,WAAjB,C","file":"agent.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4048172fc59fb451a4a1","import Agent from './Agent';\n\nwindow.__bem_agent_injected__ = true;\n\nconst agent = new Agent();\n\n\n\n// WEBPACK FOOTER //\n// ./src/agent/index.js","var sendMessage = require(\"./util/sendMessage\");\n\nclass Agent {\n  constructor() {\n    this.handlers = {\n      // Broadcast when the dev tools are opened\n      connect: () => sendMessage(\"connected\"),\n      error: error => sendMessage(\"errorOccurred\", error),\n      getData: () => Agent.sendData()\n    };\n\n    this.initDevtoolsMessageListener();\n  }\n\n  static sendData() {\n      console.log(document.body.className);\n\n    return sendMessage(\"sendData\", document.documentElement.innerHTML);\n  }\n\n  initDevtoolsMessageListener() {\n    window.addEventListener(\"message\", event => {\n      // Only accept messages from same frame\n      if (event.source !== window) {\n        return;\n      }\n\n      var message = event.data;\n\n      // Only accept messages of correct format (our messages)\n      if (\n        typeof message !== \"object\" ||\n        message === null ||\n        message.source !== \"bem-validator-devtools\"\n      ) {\n        return;\n      }\n\n      this.handleMessage(message);\n    });\n  }\n\n  handleMessage(message) {\n    var handler = this.handlers[message.name];\n    console.log(\"receive message from agent\", message);\n    if (!handler) {\n      console.warn(\"No handler found for event \" + name);\n      return;\n    }\n\n    handler.call(this, message.data);\n  }\n}\n\nexport default Agent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/agent/Agent.js","const sendMessage = (name, data) => {\n  window.postMessage({\n    source: 'bem-validator-agent',\n    name: name,\n    data: data || {}\n  }, '*');\n};\n\nmodule.exports = sendMessage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/agent/util/sendMessage.js"],"sourceRoot":""}